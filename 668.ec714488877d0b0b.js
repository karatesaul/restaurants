"use strict";(self.webpackChunkrestaurants=self.webpackChunkrestaurants||[]).push([[668],{6668:(T,g,e)=>{e.r(g),e.d(g,{default:()=>M});var u=e(6814),t=e(5879),c=e(2296),r=e(5195),d=e(2557),i=e(3403),h=e(7394),E=e(9397),O=e(4664),D=e(3546),m=e(2072),p=e(7841);function v(n,P){if(1&n&&(t.TgZ(0,"mat-chip"),t._uU(1),t.qZA()),2&n){const a=P.$implicit;t.xp6(1),t.hij(" ",a.value," ")}}let M=(()=>{class n{constructor(a,s,l,_,C){this.location=a,this.restaurantService=s,this.route=l,this.router=_,this.tagsService=C,this.sub=new h.w0,this.restaurant=(0,t.tdS)(null),this.tags=(0,t.tdS)([]),this.sub.add(this.route.data.pipe((0,E.b)(o=>this.restaurant.set(o.restaurant)),(0,O.w)(o=>this.tagsService.searchIds(o.restaurant.tags))).subscribe(o=>{this.tags.set(o)}))}ngOnDestroy(){this.sub.unsubscribe()}onDeactivate(){const a=this.location.getState();a.type===p.L.Delete&&this.onDelete(a)}onDelete(a){if(!a.delete)return;const s=this.restaurant()?.id;s&&(this.sub.add(this.restaurantService.delete(s).subscribe()),this.router.navigate([".."],{relativeTo:this.route}))}static#t=this.\u0275fac=function(s){return new(s||n)(t.Y36(u.Ye),t.Y36(D.Z),t.Y36(i.gz),t.Y36(i.F0),t.Y36(m.Z))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["restaurant"]],standalone:!0,features:[t.jDz],decls:15,vars:2,consts:[[1,"detail-page"],[1,"detail-page-header"],["color","warn","mat-flat-button","","routerLink","delete",1,"detail-page-delete"],[1,"detail-page-tiles"],[1,"detail-page-tile"],[4,"ngFor","ngForOf"],[3,"deactivate"]],template:function(s,l){if(1&s&&(t.TgZ(0,"div",0)(1,"header",1)(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"button",2),t._uU(5," Delete "),t.qZA()(),t.TgZ(6,"div",3)(7,"mat-card",4)(8,"mat-card-header")(9,"mat-card-title"),t._uU(10,"Tags"),t.qZA()(),t.TgZ(11,"mat-card-content")(12,"mat-chip-set"),t.YNc(13,v,2,1,"mat-chip",5),t.qZA()()()()(),t.TgZ(14,"router-outlet",6),t.NdJ("deactivate",function(){return l.onDeactivate()}),t.qZA()),2&s){let _;t.xp6(3),t.Oqu(null==(_=l.restaurant())?null:_.name),t.xp6(10),t.Q6J("ngForOf",l.tags())}},dependencies:[u.ez,u.sg,c.ot,c.lW,r.QW,r.a8,r.dn,r.dk,r.n5,d.Hi,d.HS,d.J4,i.Bz,i.lC,i.rH],styles:[".detail-page[_ngcontent-%COMP%]{padding:2rem;box-sizing:border-box}.detail-page-header[_ngcontent-%COMP%]{display:flex}.detail-page-delete[_ngcontent-%COMP%]{margin-left:auto}.detail-page-tiles[_ngcontent-%COMP%]{display:flex;gap:2rem}.detail-page-tile[_ngcontent-%COMP%]{width:33%}"]})}return n})()}}]);